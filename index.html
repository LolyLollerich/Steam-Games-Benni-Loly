<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steam Spiele Liste</title>
    <link rel="stylesheet" href="styles.css">
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyDgjcGMye5rTH2enTvnr_v8V3cyRxkbmbQ",
        authDomain: "steam-games-e32bb.firebaseapp.com",
        projectId: "steam-games-e32bb",
        storageBucket: "steam-games-e32bb.appspot.com",
        messagingSenderId: "305794749581",
        appId: "1:305794749581:web:77f28bc047f7af80f9fec4"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    document.addEventListener("DOMContentLoaded", async function() {
        const gameForm = document.getElementById("gameForm");
        const gameList = document.getElementById("gameList");

        async function loadGames() {
            gameList.innerHTML = "";
            const querySnapshot = await getDocs(collection(db, "games"));
            querySnapshot.forEach((doc) => {
                const game = doc.data();
                const li = document.createElement("li");
                li.innerHTML = `<strong>${game.name}</strong> - <a href="${game.link}" target="_blank">Steam-Link</a> - Kategorie: ${game.category}<br>Notizen: ${game.notes}`;
                gameList.appendChild(li);
            });
        }

        gameForm.addEventListener("submit", async function(event) {
            event.preventDefault();
            const gameName = document.getElementById("gameName").value;
            const gameLink = document.getElementById("gameLink").value;
            const gameCategory = document.getElementById("gameCategory").value;
            const gameNotes = document.getElementById("gameNotes").value;
            
            await addDoc(collection(db, "games"), {
                name: gameName,
                link: gameLink,
                category: gameCategory,
                notes: gameNotes
            });

            gameForm.reset();
            loadGames();
        });

        loadGames();
    });
</script>
>
</head>
<body>
    <h1>Steam Spiele Liste</h1>
    <form id="gameForm">
        <input type="text" id="gameName" placeholder="Spielname" required>
        <input type="url" id="gameLink" placeholder="Steam-Link">
        <select id="gameCategory">
            <option value="Will spielen">Will spielen</option>
            <option value="Gespielt">Gespielt</option>
            <option value="Lieblingsspiele">Lieblingsspiele</option>
        </select>
        <textarea id="gameNotes" placeholder="Notizen"></textarea>
        <button type="submit">Hinzuf√ºgen</button>
    </form>
    <ul id="gameList"></ul>
    <script>
        // Firebase-Konfiguration (Ersetze diese mit deinen eigenen Firebase-Daten)
        const firebaseConfig = {
            apiKey: "AIzaSyDgjcGMye5rTH2enTvnr_v8V3cyRxkbmbQ",
            authDomain: "steam-games-e32bb.firebaseapp.com",
            projectId: "steam-games-e32bb",
            storageBucket: "steam-games-e32bb.firebasestorage.com",
            messagingSenderId: "305794749581",
            appId: "1:305794749581:web:77f28bc047f7af80f9fec4"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        document.addEventListener("DOMContentLoaded", function() {
            const gameForm = document.getElementById("gameForm");
            const gameList = document.getElementById("gameList");

            function loadGames() {
                gameList.innerHTML = "";
                db.collection("games").get().then((querySnapshot) => {
                    querySnapshot.forEach((doc) => {
                        const game = doc.data();
                        const li = document.createElement("li");
                        li.innerHTML = `<strong>${game.name}</strong> - <a href="${game.link}" target="_blank">Steam-Link</a> - Kategorie: ${game.category}<br>Notizen: ${game.notes}`;
                        gameList.appendChild(li);
                    });
                });
            }

            gameForm.addEventListener("submit", function(event) {
                event.preventDefault();
                const gameName = document.getElementById("gameName").value;
                const gameLink = document.getElementById("gameLink").value;
                const gameCategory = document.getElementById("gameCategory").value;
                const gameNotes = document.getElementById("gameNotes").value;
                
                db.collection("games").add({
                    name: gameName,
                    link: gameLink,
                    category: gameCategory,
                    notes: gameNotes
                }).then(() => {
                    gameForm.reset();
                    loadGames();
                });
            });
            
            loadGames();
        });
    </script>
</body>
</html>
